SpoilerAL 6.1 修正パッチ用 プラグインDLL のインターフェース


■エクスポート関数

  関数そのものではなく plugin.h に含まれる PLUGIN_FUNCTION 構造体を
  エクスポートする必要があります。
  example.c を参考に PLUGIN_EXPORT マクロを使用してください。

  引数は printf のような可変引数では省略できますが、
  それ以外は必要になります。

  呼び出し規約は __cdecl のみです。

  命名基準に関しては、純粋Cの名前のみになるので関数の宣言に EXTERN_C を
  用いるか、もしくは defファイルで名称を変更する必要があります。

  ある程度はマクロ化されていますが、
  仕様に適したバイナリが生成されるのであれば自由にしてください。


■メイン関数

  DllMain関数は必須ではありませんが、Visual C++ のデフォルトライブラリが
  必要になる場合はメイン関数がなければビルドできません。
  これは Microsoft の仕様ですが、CRT (C標準ライブラリ、vsnprintf等) が
  必要になる場合はメイン関数を用意した方が楽になります。
  モジュールをコンパクトにしたり、必要以上に速度を要求する場合は
  CRTを自前で用意する事になります。


